const uefnGameData = {
  "uefn-elevator": {
    title: "1 vs. 100",
    tags: "Arcade | Casual | Single Player | Shooter",
    thumbnail: "img/thumbnails/UEFN-Elevator.png",
    description: "Elevator Tower Escape lets you race against time in this arcade-inspired shooter! Armed with your trusty Mammoth Pistol and unlimited ammo, search for keycards hidden throughout a guard-infested tower. Outmaneuver 100 enemies, collect the keys, and escape before the timer hits zero.",
    screenshots: [
      "img/screenshots/uefn-elevator-1.png",
      "img/screenshots/uefn-elevator-2.png",
      "img/screenshots/uefn-elevator-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/7919-4258-3271"
  },
  "uefn-deathmatch": {
    title: "Deathmatch Classic",
    tags: "Arcade | Arena | Casual | Teams",
    thumbnail: "img/thumbnails/UEFN-Deathmatch.png",
    description: "Deathmatch Classic is a fast-paced, team-based shooter inspired by a classic cs map. With unlimited ammo, quick loadouts, and no room for hesitation, it’s chaos at its finest—perfect for settling old scores in a hail of bullets.",
    screenshots: [
      "img/screenshots/uefn-deathmatch-1.png",
      "img/screenshots/uefn-deathmatch-2.png",
      "img/screenshots/uefn-deathmatch-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/7984-3984-6041"
  },
  "uefn-wmtissue": {
    title: "Where's My Tissue?",
    tags: "Arcade | Casual | Objective | Teams",
    thumbnail: "img/thumbnails/UEFN-WMTissue.png",
    description: "Where’s My Tissue is a chaotic, arcade-inspired multiplayer game where players switch between two roles: Roll Raiders, who race around collecting tissue rolls, and Wipe Warriors, who hunt them down with scythes. Navigate an upgraded map, outsmart your opponents, and switch sides after each round to keep the action fresh.",
    screenshots: [
      "img/screenshots/uefn-wmtissue-1.png",
      "img/screenshots/uefn-wmtissue-2.png",
      "img/screenshots/uefn-wmtissue-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/9942-6114-0517"
  },
  "uefn-kots": {
    title: "King of the Swords",
    tags: "1v1 | Arena | Competitive | Melee",
    thumbnail: "img/thumbnails/UEFN-Kots.png",
    description: "King of the Sword is the ultimate sword-fighting tournament, where players battle through intense 1v1 duels in a high-stakes, bracket-style format. No guns—just blades, reflexes, and pure skill. Start as a novice, climb your way through the ranks, and claim the throne as the Grand Champion. Only one can wear the crown.",
    screenshots: [
      "img/screenshots/uefn-kots-1.png",
      "img/screenshots/uefn-kots-2.png",
      "img/screenshots/uefn-kots-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/3202-1287-6622"
  },
  "uefn-pachunt": {
    title: "PacHunt",
    tags: "Battle | Competitive | Free for All | Gunfight",
    thumbnail: "img/thumbnails/UEFN-PacHunt.png",
    description: "Pachunt drops you into a wild Free-For-All arena with no building, just pure survival instinct. Navigate a massive maze, adapt to random weapons on each respawn, and fight to control unlocking weapon caches. It’s fast, it’s unpredictable, and it’s every player for themselves. Be the PAC — hunt or be hunted.",
    screenshots: [
      "img/screenshots/uefn-pachunt-1.png",
      "img/screenshots/uefn-pachunt-2.png",
      "img/screenshots/uefn-pachunt-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/7123-4441-8086"
  },
  "uefn-labescape": {
    title: "Lab Escape",
    tags: "Casual | Just for Fun | Melee | Teams",
    thumbnail: "img/thumbnails/UEFN-LabEscape.png",
    description: "Lab Escape is a high-stakes team challenge set inside a mysterious Laboratory Arena. Work together to call in supply drops, unlock gates, and retrieve the keycard—but beware: you’ll need to decide whether to fight or flee. Will your team escape... or be eliminated trying?",
    screenshots: [
      "img/screenshots/uefn-labescape-1.png",
      "img/screenshots/uefn-labescape-2.png",
      "img/screenshots/uefn-labescape-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/7623-7293-7581"
  },
  "uefn-boxfight": {
    title: "Melee Boxfight",
    tags: "Arena | Boxfight | Free for All | Melee",
    thumbnail: "img/thumbnails/UEFN-BoxFight.png",
    description: "Melee Weapons Only Boxfight Arena drops players into a classic box fight arena—but with a twist: it’s melee weapons only. Battle in a fast-paced free-for-all, dodge the incoming storm, and fight to be the last one standing. No guns, just grit.",
    screenshots: [
      "img/screenshots/uefn-boxfight-1.png",
      "img/screenshots/uefn-boxfight-2.png",
      "img/screenshots/uefn-boxfight-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/0630-7567-1391"
  },
  "uefn-upward": {
    title: "Upward",
    tags: "Arena | Building | Casual | Free for All",
    thumbnail: "img/thumbnails/UEFN-Upward.png",
    description: "Upward is a fast-paced competitive experience where players face off in 5 unique rounds, each testing different skills. Hone your mechanics in the Building Practice Arena, race upward in a vertical build challenge, survive the deadly rising lava, and unleash chaos in the elimination rounds. Every match is a new chance to dominate the arena!",
    screenshots: [
      "img/screenshots/uefn-upward-1.png",
      "img/screenshots/uefn-upward-2.png",
      "img/screenshots/uefn-upward-3.png"
    ],
    link: "https://www.fortnite.com/@sirreyyy/3511-2783-0218"
  }
};

const unityGameData = {
  "unity-pocket": {
    title: "Pocket Merge",
    tags: "2D | Arcade | Casual | Puzzle",
    thumbnail: "img/thumbnails/Unity-Pocket.png",
    description: "Pocket Merge is physics-based merging game inspired by the popular Suika Game — but with a twist! Drop and combine billiard balls to climb the numbers, rack up points, and keep the table from overflowing.",
    screenshots: [
      "img/screenshots/unity-pocket-1.png",
      "img/screenshots/unity-pocket-2.png",
      "img/screenshots/unity-pocket-3.png"
    ],
    link: "https://sirreyyy.itch.io/pocket-merge"
  },
  "unity-bounceandspin": {
    title: "Bounce and Spin",
    tags: "3D | Arcade | Casual | Endless Runner",
    thumbnail: "img/thumbnails/Unity-BounceAndSpin.png",
    description: "Bounce and Spin lets you control a constantly bouncing ball atop a rotating hexagonal platform field. Platforms move toward you while random tiles vanish—rotate the arena to line up the next safe landing. Miss, and it’s game over.",
    screenshots: [
      "img/screenshots/unity-bounceandspin-1.png",
      "img/screenshots/unity-bounceandspin-2.png",
      "img/screenshots/unity-bounceandspin-3.png"
    ],
    link: "https://sirreyyy.itch.io/bounceandspin"
  },
  "unity-scilab": {
    title: "Science Laboratory",
    tags: "3D | Casual | First Person | Objective",
    thumbnail: "img/thumbnails/Unity-SciLab.png",
    description: "Step into a futuristic lab in this mini quest demo! Collect essential lab equipment, race against time, and team up with your chatty flying companion, Chatty, to complete your objectives before the clock runs out.",
    screenshots: [
      "img/screenshots/unity-scilab-1.png",
      "img/screenshots/unity-scilab-2.png",
      "img/screenshots/unity-scilab-3.png"
    ],
    link: "https://sirreyyy.itch.io/science-laboratory"
  },
  "unity-catsweeper": {
    title: "Catsweeper",
    tags: "2D | Casual | Puzzle | Objective",
    thumbnail: "img/thumbnails/Unity-Catsweeper.png",
    description: "Catsweeper is a casual puzzle game where players must clear a grid of hidden cats while avoiding traps. Inspired by the classic Minesweeper, it combines strategy and luck as players uncover tiles, gather clues, and try to avoid all the cats while uncovering the field.",
    screenshots: [
      "img/screenshots/unity-catsweeper-1.png",
      "img/screenshots/unity-catsweeper-2.png",
      "img/screenshots/unity-catsweeper-3.png"
    ],
    link: "https://sirreyyy.itch.io/catsweeper"
  },
  "unity-cardofcats": {
    title: "Card of Cats",
    tags: "2D | Casual | Puzzle | Objective",
    thumbnail: "img/thumbnails/Unity-CardOfCats.png",
    description: "Card of Cats memory game is a fun and engaging way to test your memory skills. Players flip over cards to find matching pairs of adorable cats, all while trying to have the least guess attempts. With colorful graphics and cute sound effects, this game is perfect for players of all ages looking for a quick and enjoyable challenge.",
    screenshots: [
      "img/screenshots/unity-cardofcats-1.png",
      "img/screenshots/unity-cardofcats-2.png",
      "img/screenshots/unity-cardofcats-3.png"
    ],
    link: "https://sirreyyy.itch.io/card-of-cats"
  },
  "unity-stackedup": {
    title: "Stacked Up",
    tags: "3D | Arcade | Casual | Puzzle",
    thumbnail: "img/thumbnails/Unity-StackedUp.png",
    description: "A fast-paced platform stacking game where timing is everything. Stack platforms as high as you can in this slick arcade challenge, inspired by a classic mobile game.",
    screenshots: [
      "img/screenshots/unity-stackedup-1.png",
      "img/screenshots/unity-stackedup-2.png",
      "img/screenshots/unity-stackedup-3.png"
    ],
    link: "https://sirreyyy.itch.io/stackedup"
  },
  "unity-cuboid": {
    title: "Cuboid Fallout",
    tags: "2D | Arcade | Casual | Side Scroller",
    thumbnail: "img/thumbnails/Unity-Cuboid.png",
    description: "Cuboid Fallout is a fast-paced arcade game where players control a cube that must navigate through a series of obstacles and challenges. The goal is to survive as long as possible while collecting coins and avoiding hazards. With simple controls and addictive gameplay, Cuboid Fallout offers a fun and engaging experience for players of all ages.",
    screenshots: [
      "img/screenshots/unity-cuboid-1.png",
      "img/screenshots/unity-cuboid-2.png",
      "img/screenshots/unity-cuboid-3.png"
    ],
    link: "https://sirreyyy.itch.io/cuboidfallout"
  }
};

const unrealGameData = {
  "ue-tpdemo": {
    title: "3rd Person Demo",
    tags: "3D | Casual | First Person | Third Person",
    thumbnail: "img/thumbnails/thumbnail.png",
    description: "Upward is a fast-paced competitive experience where players face off in 5 unique rounds, each testing different skills. Hone your mechanics in the Building Practice Arena, race upward in a vertical build challenge, survive the deadly rising lava, and unleash chaos in the elimination rounds. Every match is a new chance to dominate the arena!",
    screenshots: [
      "img/screenshots/ue-tpdemo-1.png",
      "img/screenshots/ue-tpdemo-2.png",
      "img/screenshots/ue-tpdemo-3.png"
    ],
    link: "https://sirreyyy.itch.io/thirdperson-demo"
  }
};

// === HELPERS ===
function extractMapCode(link) {
  const parts = link.split("/");
  return parts.pop();
}

// === CARD CREATION ===
function createCard(game, showMapCode = false) {
  const card = document.createElement("div");
  card.className = "card";

  // Set screenshots for hover backgrounds (if needed elsewhere)
  if (game.screenshots && game.screenshots.length > 0) {
    card.setAttribute("data-bg", game.screenshots.join(","));
  }

  // Game thumbnail
  const img = document.createElement("img");
  img.src = game.thumbnail;
  img.alt = game.title;
  card.appendChild(img);

  // Details popup
  const details = document.createElement("div");
  details.className = "card-details";
  details.innerHTML = `
  <div class="details-header">
    <h3 class="game-title">${game.title}</h3>
    <h5 class="game-tags">${game.tags}</h5>
  </div>
  <p>${game.description}</p>
`;

  // Action row: play button + screenshot strip
  const actionRow = document.createElement("div");
  actionRow.className = "card-action-row";

  // Screenshot strip
  if (game.screenshots && game.screenshots.length > 0) {
    const strip = document.createElement("div");
    strip.className = "screenshot-strip";
    game.screenshots.forEach(url => {
      const thumb = document.createElement("img");
      thumb.src = url;
      thumb.alt = `${game.title} screenshot`;
      strip.appendChild(thumb);
    });
    actionRow.appendChild(strip);
  }

  details.appendChild(actionRow);

  // Play button
  const playBtn = document.createElement("a");
  playBtn.href = game.link;
  playBtn.target = "_blank";
  playBtn.className = "play-btn";
  playBtn.textContent = "Play";
  actionRow.appendChild(playBtn);

  // Add details to card
  card.appendChild(details);

  // Title row (with optional map code)
  const titleRow = document.createElement("div");
  titleRow.className = "title-row";
  titleRow.innerHTML = `
    <h3>${game.title.split(":")[0]}</h3>
    ${showMapCode ? `<p class="map-code">${extractMapCode(game.link)}</p>` : ""}
  `;
  card.appendChild(titleRow);

  return card;
}

// === CARD GALLERY BUILDERS ===
function createUEFNGameCards() {
  const gallery = document.getElementById("uefnGameGallery");
  for (const key in uefnGameData) {
    const card = createCard(uefnGameData[key], true);
    gallery.appendChild(card);
  }
  // setupBackgroundHover(gallery);
}

function createUnityGameCards() {
  const gallery = document.getElementById("unityGameGallery");
  for (const key in unityGameData) {
    const card = createCard(unityGameData[key]);
    gallery.appendChild(card);
  }
  // setupBackgroundHover(gallery);
}

function createUnrealGameCards() {
  const gallery = document.getElementById("unrealGameGallery");
  for (const key in unrealGameData) {
    const card = createCard(unrealGameData[key]);
    gallery.appendChild(card);
  }
  // setupBackgroundHover(gallery);
}

// === SCROLL TO TOP ===
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// === THEME SWITCHING ===
function setTheme(theme) {
  document.body.className = '';
  document.body.classList.add(`theme-${theme}`);
}


// === INIT ===
document.addEventListener("DOMContentLoaded", createUEFNGameCards);
document.addEventListener("DOMContentLoaded", createUnityGameCards);
document.addEventListener("DOMContentLoaded", createUnrealGameCards);


document.addEventListener('mouseover', function(e) {
  if (e.target.matches('.screenshot-strip img')) {
    const cardDetails = e.target.closest('.card-details');
    // Remove any existing zoomed image
    const existingZoom = cardDetails.querySelector('.zoomed-center');
    if (existingZoom) existingZoom.remove();
    // Clone the hovered image
    const zoomed = e.target.cloneNode(true);
    zoomed.classList.add('zoomed-center');
    cardDetails.appendChild(zoomed);
  }
});

document.addEventListener('mouseout', function(e) {
  // Remove zoomed image when mouse leaves the image or card-details
  if (
    e.target.matches('.screenshot-strip img') ||
    (e.target.classList && e.target.classList.contains('card-details'))
  ) {
    const cardDetails = e.target.closest('.card-details') || e.target;
    if (cardDetails) {
      const zoomed = cardDetails.querySelector('.zoomed-center');
      if (zoomed) zoomed.remove();
    }
  }
});